{% extends 'main/base.html' %}

{% block title %} {{user.username}} profile{% endblock %}
{% load static %}
{% block content%}


<div class="container">
  <div class="row mt-4">
      <div class="row">
          <div class="col-md-4">
              <div class="text-center mt-5">
                  <h2 style="font-family: cursive;">@{{ user_object.username }}</h2>
                  <img src="{{ user_object.profile.avatar.url }}" style="width: 80%;" alt="User Avatar">
              </div>
          </div>
          <div class="col-md-8 mt-5">
              <div class="card shadow " style="width: 100%; background-color: #f8f9fa;">
                  <div class="card-body ">
                      <h5 class="card-title text-center mb-4">Profile</h5>
                      <div class="row mb-3">
                          <div class="col">
                              <h6 class="card-subtitle mb-2 text-muted">User Information:</h6>
                              <div class="row">
                                  <div class="col-4"><strong style="font-family: cursive;">Username:</strong></div>
                                  <div class="col-8">{{ user_object.username }}</div>
                              </div>
                              <div class="row">
                                  <div class="col-4"><strong style="font-family: cursive;">First Name:</strong></div>
                                  <div class="col-8">{{ user_object.first_name }}</div>
                              </div>
                              <div class="row">
                                  <div class="col-4"><strong style="font-family: cursive;">Last Name:</strong></div>
                                  <div class="col-8">{{ user_object.last_name }}</div>
                              </div>
                              <div class="row">
                                  <div class="col-4"><strong style="font-family: cursive;">Email:</strong></div>
                                  <div class="col-8"><a href="mailto:{{ user_object.email }}" class="text-decoration-none text-dark">{{ user_object.email }}</a></div>
                              </div>
                          </div>
                      </div>
                      {% if request.user.is_authenticated %}
                      <div class="text-center">
                          <a href="{% url 'account:update_profile' %}" class="btn btn-dark text-decoration-none">Update Profile</a>
                      </div>
                      {% endif %}
                  </div>
              </div>
          </div>
      </div>
      
      <hr>

      <div class="container">
        <div class="row gap-2 justify-content-center">
            <div class="col">
                {% if user.is_authenticated %}
                <button style="background-color: black; width: 50%; font-family: cursive; border-color: antiquewhite;" class="btn btn-primary mb-3" type="button" data-bs-toggle="collapse" data-bs-target="#commentsCollapse" aria-expanded="false" aria-controls="commentsCollapse">
                    Comments
                </button>
                <div class="collapse show" id="commentsCollapse">
                    <h4>Comments:</h4>
                    <div class="row">
                        {% for comment in user.comment_set.all %}
                        <div class="col-3">
                            <div style="width: 75%; background-color: rgb(255, 255, 255);" class="d-flex flex-column gap-2 border border-1 shadow p-2 rounded-3 h-100">
                                <a href="{% url 'main:detail_images' comment.user.username %}#comments">
                                    <img src="{{ comment.Blog.image.url }}" width="200px" height="300px" alt="{{ comment.Blog.name }} image">
                                </a>
                                <p>{{ comment.content }}</p>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                {% else %}
                <div style="font-family: cursive; background-color: rgb(175, 175, 185); color: black;" class="alert ">You must <a href="{% url 'account:login_user_view' %}">Sign in</a> to view comments.</div>
                {% endif %}
            </div>
        </div>
    
        <div class="row justify-content-center">
            <div class="col">
                {% if user.is_authenticated %}
                <button style="background-color: black; width: 50%; font-family: cursive; border-color: antiquewhite;" class="btn btn-primary mb-3" type="button" data-bs-toggle="collapse" data-bs-target="#favoritesCollapse" aria-expanded="false" aria-controls="favoritesCollapse">
                    Favorites
                </button>
                <div class="collapse show" id="favoritesCollapse">
                    <h4>Favorites:</h4>
                    <div class="row">
                        {% for favorite in user.favorite_set.all %}
                        <div class="col-4">
                            <div style="width: 53%; background-color: rgb(255, 255, 255);" class="d-flex flex-column gap-2 shadow p-3 h-100">
                                <img src="{{ favorite.Blog.image.url }}" class="w-100 card-image" alt="{{ favorite.Blog.name }} image">
                                <h6 class="pt-1 pb-1 ps-3 pe-3 rounded-pill {{ favorite.Blog.category }}">{{ favorite.Blog.category }}</h6>
                                <h6>{{ favorite.Blog.created_at }}</h6>
                                <h2><a href="{% url 'main:detail_images' favorite.Blog.id %}" class="text-decoration-none">{{ favorite.Blog.name }}</a></h2>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                {% else %}
                <div style="font-family: cursive; background-color: rgb(142, 142, 150); color: black;" class="alert ">You must <a href="{% url 'account:login_user_view' %}">Sign in</a> to view favorites.</div>
                {% endif %}
            </div>
        </div>
    </div>
    
          </div>
      </div>
  </div>
</div>

    

    <!-- {% for post in user.blog_set.all %} -->
    <!-- <a style="color:white;" href="?user={{post.user.id}}" class="p-2 ps-3 pe-3 text-decoration-none">My Posts</a>
    <div class="col-4">
      <div class="d-flex flex-column gap-2 border border-1 shadow p-3 rounded-4 h-100">
          <img src="{{ post.Blog.image.url }}"  class="w-100 rounded-4 card-image "/>
          <h6 class="cat pt-1 pb-1 ps-3 pe-3 rounded-pill {{post.Blog.category}} ">{{ post.Blog.category }}</h6>
          <h6 class="text-muted">{{ post.Blog.created_at }}</h6>
          <h2><a href="" class="text-decoration-none">{{post.Blog.name}}</a></h2>   
      </div>
  </div> -->
    <!-- {% endfor %} -->


{% endblock %}