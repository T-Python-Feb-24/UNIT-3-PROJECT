{% extends 'main/base.html' %}
{% load static%}
{%load mathfilters %}



 {% block content %}
 

 <div class="row mt-5 ">
 <div class="d-flex justify-content-center align-items-center">
 <h1>{{recipe.title}}</h1>
 </div>
  </div>

<div class="row mt-5">
<div class="col md-10">
<img src="{{ recipe.image.url }}"  class="w-100 rounded-4"/>
 <br><br>
    <a href="{% url 'favorites:recipe_favorites_view' recipe.id %}" {% if not request.user.is_authenticated %} data-bs-toggle="modal" data-bs-target="#favoriteModal" {% endif %} class="text-decoration-none"><i class="bi {% if is_favored %} bi-heart-fill {% else %} bi-heart {% endif %} favorite"></i></a>
    
</div>
</div>

<div class="row ml-5 mt-5">
    <div class=" detail-info col md-6">
    {% if request.user.is_staff %}
        <a href="{% url 'main:update_recipe_page' recipe.id %}" class="btn btn-primary">update</a>
        <a href="{% url 'main:delete_recipe_view' recipe.id %}" class="btn btn-danger">Delete</a>
        {% endif %}
        <h4 class=" detail-info-h mt-5">{{recipe.title}}</h4>
        <h6 class=" detail-info-h mt-5">Category :{{recipe.category}}</h6>
        <br>
        <p>Quantity : {{recipe.quantity}} Grams</p>
        <br>
        <p>Calories :{{recipe.calories}}</p>
        <br>
        <p>Ingredients :{{recipe.calories}}</p>
        <br>
        <p>How to prepare :<br><br>{{recipe.about}}</p>
      
   
    </div>


    <div class="col mt-1 md-6 ">
        <hr>
        <h6 class=" detail-info-h">Nutritions</h6>
        <!---->
        <div class="row mt-5">
<div class="col-md-6">
<div>
  <canvas id="myChart" width="400" hight="400" style=" height: 200px; width: 200px;" ></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"
style=" height: 200px; width: 200px;"
></script>

<script>
  const ctx = document.getElementById('myChart');

  new Chart(ctx, {
    type: 'doughnut',
    data: {
      labels: ['Fat', 'Protien', 'Carb'],
      datasets: [{
        label: ' % ',
        data: [{{recipe.fat}}, {{recipe.protien}}, {{recipe.carb}}],
        borderWidth: 1
      }]
    },
    options: {
      scales: {
       
      }
    }
  });
</script>

</div>
<div class="col-md-6">
  <ul class=" list-group">
             <li class=" list-group-item d-flex justify-content-between align-items-center">
                    Total grams 
                    <p>jj g</p>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    Carbohydrates
                    <p>88</p>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    Protein
                    <p>88</p>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    Sodium
                    <p>99</p>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    Sugar
                    <p>00</p>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    Potassium
                    <p>878</p>
                </li>
                </ul>           


</div>

</div><!--chart row-->
</div>


        <br>
        <hr>
        
    </div>
</div>



<div class="row mt-5">
<div class="col-md-4">
<div>
  <canvas id="myChart" width="400" hight="400" style=" height: 200px; width: 200px;" ></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"
style=" height: 200px; width: 200px;"
></script>

<script>
  const ctx = document.getElementById('myChart');

  new Chart(ctx, {
    type: 'doughnut',
    data: {
      labels: ['Fat', 'Protien', 'Carb'],
      datasets: [{
        label: ' % ',
        data: [{{recipe.fat}}, {{recipe.protien}}, {{recipe.carb}}],
        borderWidth: 1
      }]
    },
    options: {
      scales: {
       
      }
    }
  });
</script>

</div>
</div>

<h1 class="cal-title2">To burn {{recipe.calories}} calories </h1>
<div class="row justify-content-center align-items-center mt-5">
<div class="flex-column justify-content-center text-align-center col-md-2">
<div class="sport-title">
<img class="sport-img"src="{% static 'images/runing.png' %}" />
<h1 class="mt-4" >{{ recipe.calories | div:223 | mul:60 | floatformat:0}}</h1>
<p>minutes of runing</p>
</div>

</div>

<div class="flex-column col-md-2">
<div class="sport-title">
<img class="sport-img-yoga" src="{% static 'images/yoga.png' %}" />
<h1 >{{ recipe.calories | div:270 | mul:60 | floatformat:0}}</h1>
<p>minutes of runing</p>
</div>

</div>
<div class="flex-column col-md-2">

<div class="sport-title">
<img class="sport-img" src="{% static 'images/gym.png' %}" />
<h1 class="mt-4">{{ recipe.calories | div:449 | mul:60 | floatformat:0}}</h1>
<p>minutes of runing</p>
</div>


</div>
<div class="flex-column col-md-2">

<div class="sport-title">
<img class="sport-img-clean" src="{% static 'images/clean.png' %}" />
<h1 class="mt-3">{{ recipe.calories| div:293 | mul:60 | floatformat:0}}</h1>
<p>minutes of runing</p>
</div>


</div>

</div><!--end row-->







<br>
<hr>
<br>
{% if recipes.count != 0%}
 <h1>Read More</h1>
{% endif %}

 <div class=" row ">
  {% for recipe in recipes %}
    <div class="col-md-4 mt-5">

  <article class="ccard">
  <div class="im">
  <div class="card-img">
    <img class="card-img " src="{{recipe.image.url}}" class="card-img-top" alt="...">
  </div>
   </div>

  <div class="project-info">
    <div class="flex">
      <div class="project-title">
      <a href="{% url 'main:detail_recipe_page' recipe.id  %}">{{recipe.title}}</a>
      </div>

      <span class="tag">{{recipe.category}}</span>
    </div>
    <span class="lighter"
      >Quantity: {{recipe.quantity}} <br>
      Calories : {{recipe.calories}}</span>
  </div>
</article>
  </div>
    {% endfor %}

  </div>
  
 {% endblock %}
